@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
  text-rendering: optimizeLegibility;
  background-color: var(--bg-color);
  scroll-behavior: smooth;
  scroll-padding-top: 3rem;
}

html.light {
  --bg-color: theme('colors.zinc.50');
}
html.dark {
  --bg-color: theme('colors.primary.900');
}

[data-radix-popper-content-wrapper] {
  z-index: 99999 !important;
}

[data-floating-ui-portal] {
  z-index: 100000;
}

::selection {
  background-color: theme('colors.lime.500');
  color: theme('colors.lime.950');
}

@keyframes typing-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

/* 全局背景：使用 public/ 目录下的 contact-bg.svg 做为等高线图案，使用伪元素并通过 GPU 加速的 transform 做平移动画（更平滑） */
:root {
  /* 将图案高度改为视窗高度以保证填满背景（可改为 100vh / 80vh / 600px 等） */
  --bg-pattern-height: 100vh;
  /* 平移动画时长（秒），值越大滚动越慢 */
  --bg-scroll-duration: 40s; /* 默认更快一些以避免卡顿感，按需调整 */
}

/* 覆盖页面原本的背景色，确保等高线图案为唯一背景层 */
html,
body {
  background-color: transparent !important;
}

/* 使用伪元素绘制背景并做 GPU 加速的平移（更平滑、覆盖整个页面） */
body::before {
  content: '';
  position: fixed;
  inset: 0 0 0 0;
  z-index: -1; /* 放到内容后面 */
  pointer-events: none;

  /* 将图像在伪元素上重复平铺，宽度为 200% 以支持从 0 -> -50% 的无缝平移 */
  width: 200%;
  height: 100%;
  background-repeat: repeat; /* 在两个方向上平铺，确保覆盖 */
  background-size: auto var(--bg-pattern-height);
  background-position: 0 0;

  transform: translate3d(0, 0, 0);
  will-change: transform;
  animation: bg-translate linear infinite;
  animation-duration: var(--bg-scroll-duration);
}

/* 使用白天/黑夜位图替换原先的 SVG，白天使用 light.png，黑夜使用 dark.jpg（位于 public/） */
body::before {
  background-image: url('/light.png');
}

html.dark body::before {
  background-image: url('/dark.jpg');
}

@keyframes bg-translate {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(-50%, 0, 0);
  }
}

/* 可选：当用户偏好降低动画（如 prefers-reduced-motion）时暂停动画 */
@media (prefers-reduced-motion: reduce) {
  body::before {
    animation: none !important;
  }
}
